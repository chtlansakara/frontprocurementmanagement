<mat-card appearance="outlined">

  <form [formGroup]="requestSuppliesForm" (ngSubmit)="updateRequest()">

    <mat-card-content>

      <mat-grid-list cols="4" rowHeight="100px">

        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Title or Program</mat-label>
            <input matInput type="text" formControlName="title" required="">
            <!-- error message -->
            <mat-error error *ngIf="requestSuppliesForm.get('title')?.hasError('required')">
              Required field!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Select Sub-division/s</mat-label>
            <mat-select formControlName="subdivIdList" name="subdivIdList" multiple required>
              <mat-select-trigger>
                <mat-chip-set>
                  <mat-chip *ngFor="let id of requestSuppliesForm.get('subdivIdList')?.value" removable="true"
                    (removed)="removeSubdiv(id)">
                    {{getSubdivById(id)?.code}}
                    <button matChipRemove><mat-icon>close</mat-icon></button>
                  </mat-chip>
                </mat-chip-set>
              </mat-select-trigger>

              <mat-optgroup *ngFor="let group of subdivsList " [label]="group.admindivName">
                <mat-option *ngFor="let subdiv of group.subdivDtoList" [value]="subdiv.id">
                  {{subdiv.code}} - {{subdiv.name}}
                </mat-option>
              </mat-optgroup>

            </mat-select>

            <mat-error error
              *ngIf="requestSuppliesForm.get('subdivId')?.hasError('required') && requestSuppliesForm.get('admindivId')?.value">
              Sub-division is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="4">
          <mat-form-field appearance="outline">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" required></textarea>
            <mat-error error *ngIf="requestSuppliesForm.get('description')?.hasError('required')">
              Required field!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>



        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Quantity</mat-label>
            <input matInput type="text" formControlName="quantity" required="">
            <!-- error message -->
            <mat-error error *ngIf="requestSuppliesForm.get('quantity')?.hasError('required')">
              Required field!
            </mat-error>
          </mat-form-field>

        </mat-grid-tile>
        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Utilized Fund</mat-label>
            <input matInput type="text" formControlName="fund">
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Total Estimated Amount</mat-label>
            <input matInput type="text" formControlName="estimation" required="">
            <!-- error message -->
            <mat-error error *ngIf="requestSuppliesForm.get('estimation')?.hasError('required')">
              Required field!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-checkbox formControlName="previouslyPurchased" class="left-checkbox">
            Is the item previsouly purchased?
          </mat-checkbox>

        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>If yes, the year of purchase of existing item</mat-label>
            <input matInput type="number" formControlName="previousPurchaseYear">
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Reason for Re-purchase</mat-label>
            <input matInput type="text" formControlName="reasonForRequirement">
          </mat-form-field>
        </mat-grid-tile>


        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Authorizing Personnel</mat-label>
            <input matInput type="text" formControlName="authorizedBy" required="">
            <!-- error message -->
            <mat-error error *ngIf="requestSuppliesForm.get('authorizedBy')?.hasError('required')">
              Required field!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Approved Date</mat-label>
            <!-- date type input  -->
            <input matInput [matDatepicker]="datePicker" formControlName="approvedDate">
            <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
            <mat-datepicker #datePicker></mat-datepicker>
            <!-- for error message -->
            <mat-error *ngIf="requestSuppliesForm.get('approvedDate')?.hasError('required')">
              Required field!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>



        <mat-grid-tile [colspan]="3">
          <div style="text-align: left;  width: 100%; display: flex; justify-content: start">
            <button type="reset" class="form-button" mat-stroked-button style="margin-right: 16px;">Reset</button>
            <button type="submit" mat-flat-button class="form-button" color="primary"
              [disabled]="requestSuppliesForm.invalid || requestSuppliesForm.pristine">Update Request</button>
          </div>
        </mat-grid-tile>



      </mat-grid-list>


    </mat-card-content>

  </form>
</mat-card>