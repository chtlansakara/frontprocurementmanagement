<mat-card appearance="outlined">

  <form [formGroup]="userUpdateForm" (ngSubmit)="updateUser()">

    <mat-card-content>

      <mat-grid-list cols="4" rowHeight="100px">

        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Name with Initials</mat-label>
            <input matInput type="text" formControlName="name" required="">
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('name')?.hasError('required')">
              Name is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Work email</mat-label>
            <input matInput type="text" formControlName="email" required>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('email')?.hasError('required')">
              Email is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>NIC</mat-label>
            <input matInput type="text" formControlName="nic" required>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('nic')?.hasError('required')">
              NIC is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Add new password</mat-label>
            <input matInput [type]="hidePassword? 'password':'text'" formControlName="password">
            <button type="button" mat-icon-button matSuffix (click)="togglePasswordVisibility()">
              <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Select Admin Division</mat-label>
            <mat-select formControlName="admindivId" name="admindivId" required>
              <mat-option *ngFor="let admindiv of admindivList" [value]="admindiv.id">
                {{admindiv.name}}
              </mat-option>
            </mat-select>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('admindivId')?.hasError('required')">
              Admin division is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <!-- setup -->
        <mat-grid-tile [colspan]="2">
          <mat-form-field appearance="outline">
            <mat-label>Select Sub-division</mat-label>
            <mat-select formControlName="subdivId" name="subdivId" required>
              <mat-option *ngFor="let subdiv of filteredSubdivList" [value]="subdiv.id">
                {{subdiv.name}}
              </mat-option>
            </mat-select>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('subdivId')?.hasError('required')">
              Sub-division is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Birthdate</mat-label>
            <!-- date type input  -->
            <input matInput [matDatepicker]="birthdatePicker" formControlName="birthdate">
            <mat-datepicker-toggle matSuffix [for]="birthdatePicker"></mat-datepicker-toggle>
            <mat-datepicker #birthdatePicker></mat-datepicker>
            <!-- for error message -->
            <mat-error *ngIf="userUpdateForm.get('birthdate')?.hasError('required')">
              Due date is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Employee ID</mat-label>
            <input matInput type="text" formControlName="employeeId" required>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('employeeId')?.hasError('required')">
              Employee ID is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Select Designation</mat-label>
            <mat-select formControlName="designationId" name="designationId" required>
              <mat-option *ngFor="let designation of designationList" [value]="designation.id">
                {{designation.title}} - {{designation.grade}}
              </mat-option>
            </mat-select>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('designationId')?.hasError('required')">
              Designation is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Select User Role</mat-label>
            <!-- select type input -->
            <mat-select formControlName="userRole" name="userRole">
              <mat-option *ngFor="let userRole of userRolesList" [value]="userRole" class="form-field">
                {{userRole}}
              </mat-option>
            </mat-select>
            <!-- for error message -->
            <mat-error *ngIf="userUpdateForm.get('userRole')?.hasError('required') ">
              User Role is required!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>

        <mat-grid-tile [colspan]="1">
          <mat-form-field appearance="outline">
            <mat-label>Contact Number</mat-label>
            <input matInput type="tel" formControlName="telephone" placeholder="0123456789">
            <mat-icon matSuffix>phone</mat-icon>
            <!-- error message -->
            <mat-error error *ngIf="userUpdateForm.get('telephone')?.hasError('pattern')">
              Invalid phone number!
            </mat-error>
          </mat-form-field>
        </mat-grid-tile>


        <mat-grid-tile [colspan]="4">
          <div style="text-align: left;  width: 100%; display: flex; justify-content: start">
            <button type="reset" class="form-button" mat-stroked-button style="margin-right: 16px;">Reset</button>
            <button type="submit" mat-flat-button class="form-button" color="primary"
              [disabled]="userUpdateForm.invalid || userUpdateForm.pristine">Update</button>
          </div>
        </mat-grid-tile>



      </mat-grid-list>


    </mat-card-content>

  </form>
</mat-card>